apiVersion: v1
kind: ConfigMap
metadata:
  name: mysql-initdb-config
data:
  init-user-db.sql: |
    CREATE DATABASE IF NOT EXISTS user_service_db;
    CREATE USER IF NOT EXISTS 'username'@'%' IDENTIFIED BY 'password';
    GRANT ALL PRIVILEGES ON user_service_db.* TO 'username'@'%';
    FLUSH PRIVILEGES;
  init-product-db.sql: |
    CREATE DATABASE IF NOT EXISTS product_service_db;
    CREATE USER IF NOT EXISTS 'username'@'%' IDENTIFIED BY 'password';
    GRANT ALL PRIVILEGES ON product_service_db.* TO 'username'@'%';
    FLUSH PRIVILEGES;
  init-order-db.sql: |
    CREATE DATABASE IF NOT EXISTS order_service_db;
    CREATE USER IF NOT EXISTS 'username'@'%' IDENTIFIED BY 'password';
    GRANT ALL PRIVILEGES ON order_service_db.* TO 'username'@'%';
    FLUSH PRIVILEGES;
  user-service-db-url: jdbc:mysql://mysql-service/user_service_db
  product-service-db-url: jdbc:mysql://mysql-service/product_service_db
  order-service-db-url: jdbc:mysql://mysql-service/order_service_db